!function(){function e(e){for(let t of e.elements)if("quantity"===t.name.toLowerCase())return 1*t.value}function t(e){let t=ShopifyAnalytics.meta.product,n=function(){let e=ShopifyAnalytics.meta.product,t=ShopifyAnalytics.meta.selectedVariantId;return e.variants.filter((e=>e.id.toString()===t))[0]||e.variants[0]}();return a(t,n,e)}function n(e){let t=null==e?void 0:e.vendor;return t||(null==e?void 0:e.product.vendor)}function a(e,t,a=1){var i;return{item_id:r(e,t),vendor:n(e),item_name:t.name,item_variant:t.public_title,price:t.price/100,currency:null===(i=ShopifyAnalytics.meta)||void 0===i?void 0:i.currency,quantity:a}}function r(e,t){return t.sku}function i(e){var t;return{item_id:c(e),vendor:n(e),item_name:e.title,item_variant:e.variant_title,price:e.price/100,currency:null===(t=ShopifyAnalytics.meta)||void 0===t?void 0:t.currency,quantity:e.quantity}}function c(e){return e.sku}var o,u=(o=window.MutationObserver||window.WebKitMutationObserver,function(e,t){if(e&&1===e.nodeType){if(o){var n=new o(t);return n.observe(e,{childList:!0,subtree:!0}),n}window.addEventListener&&(e.addEventListener("DOMNodeInserted",t,!1),e.addEventListener("DOMNodeRemoved",t,!1))}});function d(){let n,r;function c(e=0,t=null){setTimeout((()=>{fetch("/cart.js").then((e=>e.json())).then((e=>{if(n){let t={added:[],changed:[],removed:[],increased:[],decreased:[]},a=n.items.reduce((function(e,t){return e[t.variant_id]=t,e}),{}),r=e.items.reduce((function(e,t){return e[t.variant_id]=t,e}),{});if(Object.keys(r).forEach((e=>{if(a[e]){let n=r[e],i=a[e],c=n.quantity-i.quantity;0!=c&&(c>0?t.increased.push({item:n,increased:c}):t.decreased.push({item:n,decreased:-c}),t.changed.push({item:n,quantityChange:c})),delete a[e]}else t.added.push(r[e])})),Object.keys(a).forEach((e=>{t.removed.push(a[e])})),t.removed.length>0){dataLayer.push({ecommerce:null});let e=t.removed.map((e=>i(e)));dataLayer.push({event:"remove_from_cart",ecommerce:{items:e}})}}n=e,t&&t()}))}),e)}function o(e){dataLayer.push({ecommerce:null}),dataLayer.push({event:"view_item",ecommerce:{items:[e]}})}switch(ShopifyAnalytics.meta.page.pageType){case"product":setTimeout((()=>{o(t())}),0),document.addEventListener("change",(function(e){let t=new URL(document.URL).searchParams.get("variant");r!==t&&(r=t,item=function(e,t){let n=ShopifyAnalytics.meta.product,r=e;return a(n,ShopifyAnalytics.meta.product.variants.filter((e=>e.id.toString()===r))[0]||n.variants[0],t)}(t,1),o(item))}));break;case"collection":!function(){var e,t,n;let r=ShopifyAnalytics.meta.products.map((e=>a(e,e.variants[0])));dataLayer.push({ecommerce:null});const i={};var c,o,u;i.item_list_id=ShopifyAnalytics.meta.page.resourceId,null!==(e=gtm8)&&void 0!==e&&null!==(t=e.page)&&void 0!==t&&null!==(n=t.collection)&&void 0!==n&&n.title&&(i.item_list_name=null===(c=gtm8)||void 0===c||null===(o=c.page)||void 0===o||null===(u=o.collection)||void 0===u?void 0:u.title),i.items=r,dataLayer.push({event:"view_item_list",ecommerce:i})}()}function d(){var e=n.items.map((e=>i(e)));dataLayer.push({ecommerce:null}),dataLayer.push({event:"begin_checkout",ecommerce:{currency:n.currency,value:n.total_price/100,items:e}})}c(),function(){function n(){document.querySelectorAll("[href*='/cart/change']").forEach((e=>{e.addEventListener("click",(function(e){c(1e3,n)}))}))}document.querySelectorAll("form[action='/cart/add']").forEach((n=>{function a(){let a=t(e(n));c(500),dataLayer.push({ecommerce:null}),dataLayer.push({event:"add_to_cart",ecommerce:{items:[a]}})}const r=n.querySelectorAll('button[name="add"]');(null==r?void 0:r.length)>0?r.forEach((e=>{e.addEventListener("click",(e=>{a()}))})):n.addEventListener("submit",(e=>{a()}))})),n();var a=document.querySelector("#ajaxifyCart");if(null==a)document.querySelectorAll("form[action='/cart']").forEach((e=>{e.addEventListener("change",(()=>{c(1500,n)})),e.addEventListener("submit",(()=>{d()}))}));else{u(a,(function(){a.querySelectorAll(".ajaxifyCart--qty-adjuster").forEach((e=>{e.addEventListener("click",(function(e){c(1e3)}))})),a.querySelectorAll("form[action='/cart'] button[name='checkout']").forEach((e=>{e.addEventListener("click",(function(e){d()}))}))}));var r=a.querySelectorAll("form[action='/cart']");document.querySelectorAll("form[action='/cart']").forEach((e=>{var t=!1;r.forEach((n=>{n==e&&(t=!0)})),t||(e.querySelectorAll(".update-cart").forEach((e=>{e.addEventListener("click",(function(e){c(1e3)}))})),e.addEventListener("change",(()=>{c(1e3)})),e.addEventListener("submit",(()=>{d()})))}))}}()}function l(){document.querySelectorAll("form[action='/cart/add']").forEach((n=>{document.querySelectorAll(".shopify-payment-button__button").forEach((a=>{a.addEventListener("click",(function(a){let r=t(e(n));dataLayer.push({ecommerce:null}),dataLayer.push({event:"add_to_cart",ecommerce:{items:[r]}}),dataLayer.push({event:"begin_checkout",ecommerce:{currency:ShopifyAnalytics.meta.currency,value:r.quantity*r.price,items:[r]}})}))}))}))}!function e(){"undefined"==typeof ShopifyAnalytics||void 0===ShopifyAnalytics.meta||void 0===ShopifyAnalytics.meta.page?setTimeout(e,100):d()}(),"complete"===document.readyState?l():window.addEventListener("load",(function(){l()}))}();